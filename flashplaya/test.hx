import flash.events.SampleDataEvent;import flash.media.Sound;import flash.external.ExternalInterface;import flash.net.URLVariables;import flash.Vector;import flash.display.Graphics;class Test {    static function sineWaveGenerator(event:SampleDataEvent) {      var HEX:String = "0123456789ABCDEF";      if(ExternalInterface.available) {        try {          var data:String = ExternalInterface.call("genSound", 4096, event.position);          var len:Int = Math.floor(data.length / 4);          for(i in 0...len) {            var dings:Int = 0;            dings =  (HEX.indexOf(data.charAt(i * 4)));            dings += (HEX.indexOf(data.charAt((i * 4) + 1))) << 4;            dings += (HEX.indexOf(data.charAt((i * 4) + 2))) << 8;            dings += (HEX.indexOf(data.charAt((i * 4) + 3))) << 12;            var val:Float = (dings - 32768.0) / 32768.0; //  + (data.charCodeAt(i*2+1) << 8)) / 32678;            event.data.writeFloat(val);            event.data.writeFloat(val);          }        } catch (msg:Dynamic) {          trace(msg);        }      }    }    static function main() {      // trace("Started");      flash.system.Security.allowDomain("localhost");      // trace(flash.system.Security.sandboxType);      var mySound:Sound = new Sound();      mySound.addEventListener(SampleDataEvent.SAMPLE_DATA,sineWaveGenerator);      mySound.play();    }}